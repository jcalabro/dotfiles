#!/usr/bin/env bash

export CGH="$GOPATH/src/github.com/ChessCom"

export PATH="$PATH:$HOME/.bin/clc"

export EMSDK="$HOME/go/src/github.com/emscripten-core/emsdk"
export PATH="$EMSDK/upstream/emscripten:$PATH"
# export PATH="$EMSDK/node/15.14.0_64bit/bin:$PATH"
export PATH="/opt/homebrew/opt/gnu-sed/libexec/gnubin:$PATH"

alias ch="gh ChessCom"
alias start_docker="limactl start --name=docker"

function npm_init {
    npm config set @chesscom:registry https://npm.pkg.github.com
    npm config set '//npm.pkg.github.com/:_authToken' $CHESSCOM_PAT
}

#
# ceac-cluster-proxy
#

export targetPrimaryAddress="http://localhost:8080"
export targetSecondaryAddress="http://localhost:8081"
export readinessAddress="http://localhost:8080/check-best-move"

#
# engine-services
#

export analysisEnginePath="$HOME/.bin/stockfish"
export useLocalEngines="true"
export BESTMOVE_BIND_ADDR="localhost"

function hz_offer_bestmove {
    clc queue offer --name best-move-message-queue "$(cat resources/bestmove_request_1.txt)"
}
function hz_offer_bestmove_loop {
    while true; do
        hz_offer_bestmove
    done
}
function hz_clear_bestmove {
    clc queue clear --name best-move-message-queue --yes
}

#
# CEE-microservice
#

export CEE_BIN="$CGH/explanation-engine/build/explanation-engine"

#
# PGNGen
#

export PGNGEN_SOCKET_PATH="8888" # port number
